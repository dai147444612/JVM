# 根结点枚举
所有收集器在根节点枚举这一步骤时都是必须暂停用户线程的。
用户线程停下来以后使用HotSpot 的解决方案里，是使用一组称为OopMap的数据结构来检查所有执行上下文和全局的引用位置

# 安全点
在特定位置生成OOPMAP被称为安全点
指令序列的复用才可能产生安全点。指令序列复用例如：如方法调用、循环跳转、异常跳转等

让线程跑到最近的安全点有两种方式：抢先式中断（现在几乎没有虚拟机采用这种方式）、主动式中断
主动式中断：设置一个标志位，程序不断去轮询这个标志位，检测到标志位就去最近的安全点中断挂起。 标志位设置在安全点、创建对象和其他需要在java堆上分配内存的地方，避免没有足够的空间分配新的对象。



# 安全区域
安全区域是指能够确保在某一段代码片段之中，引用关系不会发生变化，因此，在这个区域中任 意地方开始垃圾收集都是安全的。我们也可以把安全区域看作被扩展拉伸了的安全点。
当用户线程执行到安全区域里面的代码时，首先会标识自己已经进入了安全区域，当线程要离开安全 区域时，它要检查虚拟机是否已经完成了根节点枚举，如果完成了，那线程就当作没事发生过，继续执行；否则它就必须一直等待，直到收到可以 离开安全区域的信号为止。

# 记忆集和卡表
记忆集是一种用于记录从非收集区域指向收集区域的指针集合的抽象数据结构。
记忆集的记录精度：
·字长精度：每个记录精确到一个机器字长（就是处理器的寻址位数，如常见的32位或64位，这个 精度决定了机器访问物理内存地址的指针长度），该字包含跨代指针。
·对象精度：每个记录精确到一个对象，该对象里有字段含有跨代指针。
·卡精度：每个记录精确到一块内存区域，该区域内有对象含有跨代指针。

# 写屏障
在HotSpot虚拟机里是通过写屏障（Write Barrier）技术维护卡表状态的
写屏障可以看作在虚拟机层面对“引用类型字段赋值”这个动作的AOP切面，在引用对象赋值时会产生一个环形（Around）通知，供程序执行额外的动作，也就是说赋值的 前后都在写屏障的覆盖范畴内。在赋值前的部分的写屏障叫作写前屏障（Pre-Write Barrier），在赋值 后的则叫作写后屏障（Post-Write Barrier）。